upstream wordpress_vol {
        server wordpress:9000;
}
server {
	listen 443 ssl;
	listen [::]:443 ssl;

	ssl_certificate /etc/ssl/certs/nginx.crt;
	ssl_certificate_key /etc/ssl/private/nginx.key;
	ssl_protocols TLSv1.3;

	access_log /var/log/nginx/wordpress_access.log;
	error_log /var/log/nginx/wordpress_error.log;

	root /var/www/html/wordpress;
	index index.php index.html;
	server_name sonkang.42.fr;
        autoindex on;

	location / {
		try_files $uri $uri/ =404;
	}

	location ~ \.php$ {
		include fastcgi.conf;
                root /var/www/wordpress;
		fastcgi_read_timeout 500;
                fastcgi_pass wordpress_vol;
                fastcgi_index index.php;  
	}
}
